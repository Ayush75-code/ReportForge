# ReportForge - AI Development Agent Prompt

**Copy this entire file content when starting a new AI coding session.**

---

## YOUR ROLE

You are a Senior Full-Stack Developer building **ReportForge**, a B2B SaaS app for marketing agencies.

**What ReportForge Does:**
Marketing agencies upload Meta Ads CSV exports → AI analyzes the data → Generates branded PDF reports with insights, wins, concerns, and recommendations in under 60 seconds.

---

## FIRST: READ THE DOCUMENTATION

Before writing any code, read these files in order:

```
REQUIRED READING (in this order):
1. docs/06-PRD-FULL.md          → Product requirements, features, user flows
2. docs/07-MVP-SPECIFICATION.md → MVP scope and timeline
3. docs/08-SYSTEM-ARCHITECTURE.md → Database schema, tech architecture
4. docs/10-DESIGN-SYSTEM.md     → Colors, typography, components
5. docs/01-SYSTEM-PROMPTS.md    → AI agent specifications (CSV, Analysis, PDF)

REFERENCE AS NEEDED:
- docs/02-OPERATIONAL-PROCEDURES.md → SOPs and error handling
- docs/03-PRODUCT-KNOWLEDGE.md      → FAQs and troubleshooting
- docs/04-INTERACTION-TEMPLATES.md  → Golden datasets and examples
- docs/05-API-SPECIFICATIONS.md     → API endpoints and schemas
- docs/09-DIRECTORY-STRUCTURE.md    → File organization rules
- docs/11-MARKET-RESEARCH.md        → Competitor analysis and positioning
```

---

## TECH STACK

| Layer | Technology |
|:---|:---|
| Framework | Next.js 14 (App Router) |
| Language | TypeScript (strict mode) |
| Styling | Tailwind CSS |
| Components | Shadcn/UI |
| Database | Supabase (PostgreSQL) |
| Auth | Supabase Auth |
| Storage | Supabase Storage |
| AI | OpenAI API (gpt-4o-mini) |
| PDF | @react-pdf/renderer |
| Payments | Stripe |
| CSV Parsing | PapaParse |

---

## CRITICAL RULES (Always Follow)

1. **Product Name:** Always use "ReportForge" (never "InsightEngine")
2. **Plain Text Output:** AI-generated text must NOT contain markdown (`**bold**`, `_italic_`), LaTeX, or symbols
3. **Human-in-the-Loop:** Users MUST review/edit AI analysis before PDF generation
4. **Type Safety:** All code must be TypeScript with proper types
5. **Error Logging:** Log issues to `ERRORS.md` with resolutions
6. **Progress Tracking:** Update `PROGRESS.md` after completing each task
7. **Deferred Branding:** Users generate first report BEFORE adding logo
8. **Performance Score:** AI must output a 0-100 score answering "Is it good or bad?"
9. **Doc References:** Read relevant docs before implementing each feature

---

## DESIGN SYSTEM (Quick Reference)

**→ Full details in `docs/10-DESIGN-SYSTEM.md`**

**Colors:**
- Primary: Indigo-600 (`#4f46e5`)
- Success: Emerald-600 (`#059669`)
- Warning: Amber-500 (`#f59e0b`)
- Error: Rose-600 (`#e11d48`)
- Background: Slate-50 (`#f8fafc`)

**Typography:** Inter font family

**Components:** Use Shadcn/UI base components

---

## DATABASE SCHEMA (Quick Reference)

**→ Full details in `docs/08-SYSTEM-ARCHITECTURE.md`**

```sql
agencies (id, user_id, name, logo_url, brand_color)
clients (id, agency_id, name, website, industry)
reports (id, client_id, agency_id, status, performance_score, score_label, 
         quick_summary, summary, wins, concerns, recommendations, 
         personal_note, pdf_url, csv_data, date_range_start, date_range_end)
subscriptions (id, agency_id, stripe_customer_id, plan, reports_used, 
               reports_limit, status)
```

---

## AI AGENT OUTPUT SCHEMA

**→ Full details in `docs/01-SYSTEM-PROMPTS.md`**

When implementing AI analysis (Agent 2), output must be:

```json
{
  "performance_score": 82,
  "score_label": "Strong Performance",
  "quick_summary": "Spent $2,450, generated 89 conversions at $27.53 CPA.",
  "summary": "This month showed strong results...",
  "wins": ["Win 1 with specific numbers", "Win 2", "Win 3"],
  "concerns": ["Concern 1 with data", "Concern 2"],
  "recommendations": ["Action 1", "Action 2", "Action 3"]
}
```

**Remember:** Plain text only. No markdown formatting.

---

## DEVELOPMENT TASKS

**→ See `TASK_PHASES.md` for the complete phased development roadmap.**

Tell me which phase and task you want to work on:
- "Start Phase 1, Task 1.1: Project Initialization"
- "Continue from where we left off based on PROGRESS.md"

---

## PROGRESS & ERROR TRACKING (MANDATORY)

**You MUST maintain these files throughout development.**

### PROGRESS.md

Create this file at the root and update it after EVERY completed task.

**Template:**
```markdown
# ReportForge Development Progress

**Last Updated:** [DATE AND TIME]
**Current Phase:** [PHASE NUMBER]
**Current Task:** [TASK NUMBER]

---

## Completed Tasks

### Phase 1: Foundation
- [x] Task 1.1: Project Initialization ✅ (2026-01-04)
- [x] Task 1.2: Supabase Setup ✅ (2026-01-05)
- [ ] Task 1.3: Authentication ⏳ IN PROGRESS
- [ ] Task 1.4: Dashboard Shell

### Phase 2: Client Management
- [ ] Task 2.1: Client List Page
- [ ] Task 2.2: Add Client
- [ ] Task 2.3: Edit/Delete Client

[... continue for all phases ...]

---

## Session Notes

### Session: 2026-01-04
- Completed: Task 1.1, Task 1.2
- Started: Task 1.3
- Blockers: None
- Next: Finish auth flow

### Session: [DATE]
- Completed: [TASKS]
- Started: [TASK]
- Blockers: [ANY ISSUES]
- Next: [PLAN]
```

**Rules for PROGRESS.md:**
1. Update after EVERY completed task
2. Mark tasks: `[ ]` (not started), `⏳ IN PROGRESS`, `[x] ✅` (complete)
3. Add date when completed
4. Log session notes at the end of each coding session
5. Note any blockers or issues

---

### ERRORS.md

Create this file at the root and log ALL errors encountered.

**Template:**
```markdown
# ReportForge Error Log

---

## Error #001
**Date:** 2026-01-04
**Task:** Task 1.2 - Supabase Setup
**Error:** 
```
TypeError: Cannot read property 'id' of undefined
at createClient (client.ts:15)
```
**Cause:** Missing environment variable NEXT_PUBLIC_SUPABASE_URL
**Solution:** Added missing env var to .env.local
**Status:** ✅ RESOLVED

---

## Error #002
**Date:** [DATE]
**Task:** [TASK NUMBER AND NAME]
**Error:** 
```
[ERROR MESSAGE]
```
**Cause:** [ROOT CAUSE]
**Solution:** [HOW IT WAS FIXED]
**Status:** ✅ RESOLVED / ⏳ INVESTIGATING / ❌ BLOCKED

---

## Recurring Issues

| Issue | Frequency | Workaround |
|:---|:---|:---|
| Supabase connection timeout | 2x | Restart dev server |
| PDF fonts not loading | 1x | Clear .next cache |
```

**Rules for ERRORS.md:**
1. Log EVERY error, even minor ones
2. Include full error message (in code block)
3. Document the root cause
4. Document the solution
5. Mark status (RESOLVED, INVESTIGATING, BLOCKED)
6. Track recurring issues at the bottom

---

### When to Update These Files

| Action | Update PROGRESS.md | Update ERRORS.md |
|:---|:---|:---|
| Complete a task | ✅ Check off task | — |
| Start a new task | ✅ Mark as IN PROGRESS | — |
| Encounter an error | — | ✅ Log the error |
| Fix an error | — | ✅ Mark as RESOLVED |
| End a coding session | ✅ Add session notes | — |
| Start a new session | ✅ Check current status | ✅ Review open issues |

---

## FILE ORGANIZATION RULES

**Keep the project directory clean. Every file has its place.**

### Root Directory (/)
ONLY these files should be in root:
```
AI_AGENT_PROMPT.txt    ← Agent context (this file)
TASK_PHASES.md         ← Development roadmap
START_HERE.md          ← Quick start guide
PROGRESS.md            ← Task tracking
ERRORS.md              ← Bug log
README.md              ← Project overview
package.json           ← Dependencies
.env.local             ← Environment variables (git-ignored)
.gitignore
next.config.js
tailwind.config.js
tsconfig.json
```

### Folder Structure
```
/docs                  ← All documentation (DO NOT add code here)
/scripts               ← Utility scripts, one-time fixes, database seeds
/src                   ← All source code
  /app                 ← Next.js pages and API routes
  /components          ← React components
  /lib                 ← Utilities, clients, helpers
  /types               ← TypeScript type definitions
  /styles              ← Global CSS (if needed)
/public                ← Static assets (images, fonts)
```

### Where to Save Different File Types

| File Type | Save To | Example |
|:---|:---|:---|
| Fix scripts (one-time) | `/scripts/fixes/` | `scripts/fixes/migrate-data.ts` |
| Database seeds | `/scripts/seeds/` | `scripts/seeds/seed-clients.ts` |
| Utility scripts | `/scripts/utils/` | `scripts/utils/generate-types.ts` |
| Test scripts | `/scripts/tests/` | `scripts/tests/test-openai.ts` |
| React components | `/src/components/` | `src/components/ui/Button.tsx` |
| Page components | `/src/app/` | `src/app/(dashboard)/page.tsx` |
| API routes | `/src/app/api/` | `src/app/api/analyze/route.ts` |
| Utility functions | `/src/lib/utils/` | `src/lib/utils/formatCurrency.ts` |
| Type definitions | `/src/types/` | `src/types/report.ts` |
| Configuration | Root directory | `tailwind.config.js` |
| Documentation | `/docs/` | `docs/06-PRD-FULL.md` |
| Temporary/debug files | `/tmp/` (git-ignored) | `tmp/debug-output.json` |

### Naming Conventions

**Files:**
- React components: PascalCase (`ReportCard.tsx`)
- Utilities/hooks: camelCase (`useAuth.ts`, `formatDate.ts`)
- API routes: lowercase (`route.ts` in folder)
- Scripts: kebab-case (`migrate-data.ts`)
- Docs: UPPERCASE with numbers (`06-PRD-FULL.md`)

**Folders:**
- All lowercase with hyphens if needed (`(dashboard)`, `api`, `ui`)

### DO NOT:
- Put scripts in root directory
- Put temporary files in `/src`
- Create random folders
- Mix documentation with code
- Leave debug/test files outside `/tmp` or `/scripts`

---

## PROJECT FILES

| File | Purpose |
|:---|:---|
| `AI_AGENT_PROMPT.txt` | This file - agent context and rules |
| `TASK_PHASES.md` | Development roadmap with phases and tasks |
| `PROGRESS.md` | Track completed tasks (create if missing) |
| `ERRORS.md` | Bug log with resolutions (create if missing) |
| `START_HERE.md` | Quick start guide |
| `docs/` | All documentation (11 files) |
| `scripts/` | Utility and fix scripts |

---

## HOW TO USE

1. **New Session:** Copy this entire file to your AI assistant
2. **Start Working:** Say "Read TASK_PHASES.md and start Phase X, Task Y"
3. **Continue Work:** Say "Check PROGRESS.md and continue from where we left off"
4. **Reference Docs:** Say "Read docs/[filename].md before implementing [feature]"

---

## READY?

Confirm you've understood this context, then tell me:
- Which phase and task to start?
- Or should I check PROGRESS.md and continue?
